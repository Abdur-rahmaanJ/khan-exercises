<!DOCTYPE html>
<html data-require="math math-format graphie graphie-helpers-arithmetic">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Multiplying rational numbers</title>
    <script src="../khan-exercise.js"></script>
</head>
<body>
    <div class="exercise">
        <div class="problems">

            <div id="fractions">
                <div class="vars">
                    <var id="N">randRange(2, 3)</var>
                    <var id="DENOMINATORS">[randRange(2, 9), randRange(2, 9), randRange(2, 9)]</var>
                    <var id="NUMERATORS">[
                        randRangeExclude(-9, 9, [0, DENOMINATORS[0], -DENOMINATORS[0]]),
                        randRangeExclude(-9, 9, [0, DENOMINATORS[1], -DENOMINATORS[1]]),
                        randRangeExclude(-9, 9, [0, DENOMINATORS[2], -DENOMINATORS[2]])]
                    </var>
                    <var id="FACTORS">[
                       getGCD(NUMERATORS[0], DENOMINATORS[0]),
                       getGCD(NUMERATORS[1], DENOMINATORS[1]),
                       getGCD(NUMERATORS[2], DENOMINATORS[2])]
                    </var>
                    <var id="NUMERATOR">(NUMERATORS[0] / FACTORS[0]) * (NUMERATORS[1] / FACTORS[1]) * (N === 2 ? 1 : NUMERATORS[2] / FACTORS[2])</var>
                    <var id="DENOMINATOR">(DENOMINATORS[0] / FACTORS[0]) * (DENOMINATORS[1] / FACTORS[1]) * (N === 2 ? 1 : DENOMINATORS[2] / FACTORS[2])</var>
                    <var id="GCD">getGCD(NUMERATOR, DENOMINATOR)</var>
                </div>

                <div class="question"><p><code>
                    <var>fraction(NUMERATORS[0], DENOMINATORS[0])</var> \times <var>fraction(NUMERATORS[1], DENOMINATORS[1])</var>
                    <span data-if="N === 3">\times <var>fraction(NUMERATORS[2], DENOMINATORS[2])</var></span> = {?}
                </code></p></div>
                <div class="solution" data-type="rational"><var>NUMERATOR / DENOMINATOR</var></div>

                <div class="hints">
                    <div data-if="(FACTORS[0] !== 1 || FACTORS[1] !== 1) &amp;&amp; (N === 2 || FACTORS[2] !== 1)">
                        <p>First, we can simplify the problem:</p>
                        <p><code>
                            <var>fractionReduce(NUMERATORS[0], DENOMINATORS[0])</var> \times <var>fractionReduce(NUMERATORS[1], DENOMINATORS[1])</var>
                            <span data-if="N === 3">\times <var>fractionReduce(NUMERATORS[2], DENOMINATORS[2])</var></span> = {?}
                        </code></p>
                    </div>
                    <p><code>
                        <var>fractionReduce(NUMERATORS[0], DENOMINATORS[0])</var> \times <var>fractionReduce(NUMERATORS[1], DENOMINATORS[1])</var>
                        <span data-if="N === 3">\times <var>fractionReduce(NUMERATORS[2], DENOMINATORS[2])</var></span> = 
                        \dfrac{<var>NUMERATORS[0] / FACTORS[0]</var> \times <var>NUMERATORS[1] / FACTORS[1]</var>
                        <span data-if="N === 3">\times <var>NUMERATORS[2] / FACTORS[2]</var></span>}
                        {<var>DENOMINATORS[0] / FACTORS[0]</var> \times <var>DENOMINATORS[1] / FACTORS[1]</var>
                        <span data-if="N === 3">\times <var>DENOMINATORS[2] / FACTORS[2]</var></span>}
                    </code></p>

                    <p><code>
                        \phantom{<var>fractionReduce(NUMERATORS[0], DENOMINATORS[0])</var> \times <var>fractionReduce(NUMERATORS[1], DENOMINATORS[1])</var>
                        <span data-if="N === 3">\times <var>fractionReduce(NUMERATORS[2], DENOMINATORS[2])</var></span>}
                        = <var>fraction(NUMERATOR, DENOMINATOR)</var>
                    </code></p>

                    <div data-if="GCD !== 1">
                        <p>Simplify:</p>
                        <p><code>
                            \phantom{<var>fractionReduce(NUMERATORS[0], DENOMINATORS[0])</var> \times <var>fractionReduce(NUMERATORS[1], DENOMINATORS[1])</var>
                            <span data-if="N === 3">\times <var>fractionReduce(NUMERATORS[2], DENOMINATORS[2])</var></span>}
                            = <var>fractionReduce(NUMERATOR, DENOMINATOR)</var>
                        </code></p>
                    </div>
                </div>
            </div>

            <div id="terminating-decimals">
                <div class="vars">
                    <var id="N">randRange(2, 3)</var>
                    <var id="NUMS">[randRange(1, 99), randRange(1, 99), randRange(1, 99)]</var>
                    <var id="PLACES">[randRange(0, 2), randRange(0, 2), randRange(0, 2)]</var>
                    <var id="DECIMALS">[
                        roundTo(PLACES[0], NUMS[0] / pow(10, PLACES[0])),
                        roundTo(PLACES[1], NUMS[1] / pow(10, PLACES[1])),
                        roundTo(PLACES[2], NUMS[2] / pow(10, PLACES[2]))]
                    </var>
                    <var id="DIGITS">[
                        padDigitsToNum(digits(NUMS[0]), PLACES[0] + 1),
                        padDigitsToNum(digits(NUMS[1]), PLACES[1] + 1),
                        padDigitsToNum(digits(NUMS[2]), PLACES[2] + 1)]
                    </var>
                    <var id="SUBSOL">roundTo(4, DECIMALS[0] * DECIMALS[1])</var>
                    <var id="DUMMY">[]</var>
                    <var id="SOLUTION">N === 2 ? SUBSOL : roundTo(6, SUBSOL * DECIMALS[2])</var>
                </div>
                
                <div class="question"><p><code>
                    <var>DECIMALS[0]</var> \times <var>DECIMALS[1]</var> <span data-if="N === 3">\times <var>DECIMALS[2]</var></span> = {?}
                </code></p></div>

                <div class="graphie" id="multi-1">
                    graph.multiplier = new Multiplier(NUMS[0], NUMS[1], DIGITS[0], DIGITS[1], PLACES[0], PLACES[1]);
                    graph.multiplier.show();
                    graph.multiplier.showDecimals();
                    DUMMY = Array(graph.multiplier.getNumHints());
                </div>

                <div class="solution" data-type="decimal"><var>SOLUTION</var></div>

                <div class="hints">
                    <p data-if="N === 3">Let's start by dealing with the first two numbers.</p>

                    <div class="graphie" data-each="DUMMY as dummy" data-update="multi-1">
                        graph.multiplier.showHint();
                    </div>
                    <div class="graphie" data-update="multi-1">
                        graph.multiplier.showDecimalsInProduct();
                    </div>
                </div>
            </div>

        </div>
    </div>
</body>
</html>
