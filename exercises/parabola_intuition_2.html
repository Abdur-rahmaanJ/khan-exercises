<!DOCTYPE html>
<html data-require="math graphie graphie-helpers interactive">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Parabola intuition 2</title>
    <script src="../khan-exercise.js"></script>
    <style>
        .parabola-answer {
            padding: 0;
            margin: 10px 0px;
        }
        .parabola-answer p {
            margin: 8px 0px 2px 0px
        }
        .parabola-answer .mini-buttons {
            width: 20px;
            display: inline-block;
        }
        .parabola-answer .mini-buttons input {
            margin-left: 5px;
            padding: 0px 5px;
            width: 20px;
        }
    </style>
</head>
<body>
    <div class="exercise">
        <div class="vars">
            <var id="A">randRangeNonZero(-2, 2)</var>
            <var id="X1">randRangeNonZero(-5, 5)</var>
            <var id="Y1">randRangeNonZero(-5, 5)</var>
        </div>

        <div class="problems">
            <div id="button">
                <p class="question">Adjust the focus coordinates and the equation of the directrix to make the blue parabola match the orange parabola.</p>
                <p>All points on the blue parabola are equidistant from the focus and the directrix. How does changing the numbers affect the shape of the parabola?</p>

                <div class="graphie" id="grid">
                    graphInit({
                        range: 10,
                        scale: 20,
                        tickStep: 1,
                        axisArrows: "&lt;-&gt;"
                    });

                    // Plot the orange parabola
                    style({
                        stroke: "#FFA500",
                        fill: "none",
                        clipRect:[[-10, -10], [20, 20]],
                        arrows: null
                    });

                    plot(new Parabola(A, X1, Y1).graphieFunction, [-10, 10]);

                    style({
                        stroke: "#6495ED",
                        strokeWidth: 3,
                        fill: "none",
                        clipRect:[[-10, -10], [20, 20]],
                        arrows: null
                    });

                    graph.currParabola = new Parabola(1, 0, 0);
                    graph.currParabola.plot(true);
                </div>

                <div class="solution" data-type="custom">
                    <div class="instruction">
                        <p class="parabola-answer">focus x coordinate: <span id="focus-x-label"><code>0</code></span><span class="mini-buttons">
                            <input class="simple-button" onclick="updateFocusDirectrix(1, 0, 0)" type="button" value="+">
                            <input class="simple-button" onclick="updateFocusDirectrix(-1, 0, 0)" type="button" value="-"></span></p>

                        <p class="parabola-answer">focus y coordinate: <span id="focus-y-label"><code>0.25</code></span><span class="mini-buttons">
                            <input class="simple-button" onclick="updateFocusDirectrix(0, 1/8, 0)" type="button" value="+">
                            <input class="simple-button" onclick="updateFocusDirectrix(0, -1/8, 0)" type="button" value="-"></span></p>

                        <p class="parabola-answer">directrix: <span id="directrix-label"><code>y=-0.25</code></span><span class="mini-buttons">
                            <input class="simple-button" onclick="updateFocusDirectrix(0, 0, 1/8)" type="button" value="+">
                            <input class="simple-button" onclick="updateFocusDirectrix(0, 0, -1/8)" type="button" value="-"></span></p>
                    </div>

                    <div class="guess">[A, X1, Y1]</div>
                    <div class="validator-function">
                        var parab = graph.currParabola;
                        return parab.getLeadingCoefficient() === A &amp;&amp;
                               parab.getVertexX() === X1 &amp;&amp;
                               parab.getVertexY() === Y1;
                    </div>
                    <div class="show-guess">
                        guess = guess.length ? guess : [1, 0, 0];
                        var parab = graph.currParabola;
                        parab.update.apply(parab, guess);
                        redrawParabola(true);
                    </div>
                    <div class="show-guess-solutionarea">
                        guess = guess.length ? guess : [1, 0, 0];

                        // Update the graph parabola so we can use its methods
                        // to get focus and directrix
                        var parab = graph.currParabola;
                        parab.update.apply(parab, guess);

                        var fX = parab.getFocusX(),
                            fY = parab.getFocusY(),
                            dK = parab.getDirectrixK();
                        $("#focus-x-label").html("&lt;code&gt;" + fX + "&lt;/code&gt;").tex();
                        $("#focus-y-label").html("&lt;code&gt;" + fY + "&lt;/code&gt;").tex();
                        $("#directrix-label").html("&lt;code&gt;" + dK + "&lt;/code&gt;").tex();
                    </div>
                </div>
            </div>

            <div id="drag">
                <p class="question">
                    Drag the <span class="hint_orange">focus</span> and <span class="hint_orange">directrix</span> to define a 
                    <span class="hint_blue">parabola</span> with the equation of <code>y - <var>Y1</var> = <var>A</var>(x - <var>X1</var>)^2</code>.
                </p>
                <div class="graphie" id="grid">
                    graph.A = A;
                    graph.X1 = X1;
                    graph.Y1 = Y1;

                    graphInit({
                        range: 10,
                        scale: 20,
                        tickStep: 1,
                        axisArrows: "&lt;-&gt;"
                    });
                    addMouseLayer();

                    graph.directrix = addMovableLineSegment({
                        coordA: [0, -1],
                        coordZ: [1, -1],
                        snapY: 0.125,
                        vertical: false,
                        extendLine: true,
                        normalStyle: {
                            "stroke": KhanUtil.ORANGE,
                            "stroke-width": 2
                        },
                        highlightStyle: {
                            "stroke": KhanUtil.ORANGE,
                            "stroke-width": 4
                        }
                    });
                    graph.directrix.onMove = function(x, y) {
                        var oldK = graph.currParabola.getDirectrixK();
                        var coord = this.coordA[1];
                        graph.currParabola.deltaFocusDirectrix(0, 0, coord - oldK);
                        redrawParabola();

                        $("#directrix-label").html("&lt;code&gt;" + fractionReduce.apply(KhanUtil, toFraction(coord, 0.001)) + "&lt;/code&gt;").tex();
                    };

                    graph.vertex = addMovablePoint({
                        coordX: 0,
                        coordY: 1,
                        snapX: 0.25,
                        snapY: 0.25,
                    });
                    graph.vertex.onMove = function(coordX, coordY) {
                        var x = coordX - graph.currParabola.getFocusX();
                        var y = coordY - graph.currParabola.getFocusY();
                        graph.currParabola.deltaFocusDirectrix(x, y, 0);
                        redrawParabola();
                        
                        var xText = coordX &lt; 0 ? "" : "+\\space";
                        var yText = coordY &lt; 0 ? "" : "+\\space";
                        xText += fractionReduce.apply(KhanUtil, toFraction(coordX, 0.001));
                        yText += fractionReduce.apply(KhanUtil, toFraction(coordY, 0.001));

                        $("#focus-x-label").html("&lt;code&gt;" + xText + "&lt;/code&gt;").tex();
                        $("#focus-y-label").html("&lt;code&gt;" + yText + "&lt;/code&gt;").tex();
                    };

                    style({
                        stroke: "#6495ED",
                        strokeWidth: 3,
                        fill: "none",
                        clipRect:[[-10, -10], [20, 20]],
                        arrows: null
                    });

                    graph.currParabola = new Parabola(1, 0, 0);
                    graph.currParabola.plot();
                </div>

                <div class="solution" data-type="multiple">
                    <p>
                        Equation of the parabola:<br>
                        <span style="font-size: 12px;">
                            <code>y\space</code><span id="focus-y-label"><code>+ 0</code></span>
                            <code>\space=\space</code><span id="directrix-label"><code>1</code></span>
                            <code>(x\space</code><span id="focus-x-label"><code>+ 0</code></span><code>)^2</code>
                        </span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
